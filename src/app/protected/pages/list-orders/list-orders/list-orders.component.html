<div  fxLayout="row wrap"  fxLayoutAlign="center center" fxFlex="100" >

  <div fxLayout="row wrap" fxLayoutAlign="center start" fxFlex.xs="97" fxFlex="90" class="whiteframe" style="height: 100%; background-color: white; margin-top: 27px;">

    <!-- start menu search -->

    <!-- <div  fxLayout="row wrap" fxLayoutAlign="center center" style="width: 350px; height: 100px;" > -->
     
<!-- 
        <div fxLayout="row wrap" fxLayoutAlign="center center" fxFlex="30">
            <button  mat-raised-button color="warn" type="button" class="add" (click)="getAllOrders()" >
                <mat-icon class="material-symbols-outlined notranslate">refresh</mat-icon>
            </button>
        </div> -->
    <!-- </div> -->

    <!-- <form [formGroup]="myForm" fxLayout="row wrap" fxLayoutAlign="center center"  fxFlex="70"  >

        <mat-form-field class="font" appearance="outline" style="margin-top: 16px;">
                <mat-label>N° pedido</mat-label>
                <input matInput type="number" required formControlName="nroOrder" >
        </mat-form-field>

        <mat-icon matSuffix style="transform:scale(1.5); color: rgb(37, 150, 190); cursor: pointer; margin-left: 10px;" (click)="searchOrder()">search</mat-icon>
               
    </form> -->


    <form [formGroup]="myFormDate" fxLayout="row wrap"  fxLayoutAlign="center center" Flex="100" >
        <mat-form-field   fxLayout="row wrap" fxLayoutAlign="center center" class="shadow" fxFlex="100">
            <mat-label class="font fs-2">Elegí fecha</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date"  >
            <mat-datepicker-toggle matIconSuffix [for]="picker" fxFlex="100"></mat-datepicker-toggle>
            <!-- <mat-icon matSuffix style="transform:scale(1.5); color: rgb(37, 150, 190); cursor: pointer; margin-left: 40px;" (click)="searchOrder()">search</mat-icon> -->
            <mat-datepicker #picker ></mat-datepicker>
        </mat-form-field>

        <button mat-raised-button  [ngClass]="confirm ? 'btnMenuClicked':'btnMenu'" (click)="submitDate()" style="transform: translateY(-1px); z-index: 100; font-size: 1.2em;" fxFlex="100">
            <i class="material-symbols-outlined notranslate" style="transform: scale(1.5); ">schedule</i> 
            &nbsp; Buscar
        </button>
      </form>

      <div fxLayout="row wrap"  fxLayoutAlign="center center" fxFlex="100" *ngIf="noMatchDaily || noMatches" >
            
        <div fxLayout="row wrap" fxLayoutAlign="start center"  fxFlex.xs="75" fxFlex.sm="80" fxFlex="30"  class="fs-2" style="border-radius: 10px; padding: 15px; color: white; background-color: rgb(30, 116, 166); margin-bottom: 20px; margin-top: 30px; height: 48px; border-left: 10px solid red; box-shadow: 2px 2px 5px 0px rgba(0,0,0,0.75);
        -webkit-box-shadow: 2px 2px 5px 0px rgba(0,0,0,0.75);
        -moz-box-shadow: 2px 2px 5px 0px rgba(0,0,0,0.75);">
            <span class="material-icons" style="color: white;"> error </span>
            <span class="font fs-4" style="color: white; text-align: center; margin-left: 20px;">{{msgError}}</span>
        </div>
      </div>

           <!-- <mat-form-field appearance="outline" floatLabel="always" fxFlex="49" class="mt-10 font " fxFlex="100">
            
            <mat-label >Período</mat-label>
            <mat-select  formControlName="date" class="font" [value]="defaultValue" >
                        <mat-option value=""></mat-option>
                        <mat-option *ngFor="let option of nameOptions" [value]="option" class="font fs-4"> {{option }}</mat-option>
            </mat-select>
        </mat-form-field> -->

 


    <!-- start paginator -->
        <!-- <div  fxLayout="row wrap" fxLayoutAlign="center center" fxFlex="100"  *ngIf="arrOrders.length !== 0 " style="margin-top: 30px;" >
            
            <mat-paginator #paginator
            class="demo-paginator"
            (page)="handlePageEvent($event)"
            [length]="length"
            [pageSize]="pageSize"
            [disabled]="disabled" 
            [showFirstLastButtons]="showFirstLastButtons"
            [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
            [hidePageSize]="hidePageSize"
            [pageIndex]="pageIndex"
            aria-label="Select page" 
            >
            </mat-paginator>
        </div> -->
    <!-- end paginator -->
     
    <!-- start order by N° -->
    <!-- <div fxLayout="row wrap" fxLayoutAlign="center center" fxFlex.xs="99" fxFlex.sm="97" fxFlex="80" class="mt-30 whiteframe" *ngIf="showOrderFounded"  >

       

        <div fxLayout="row wrap" fxLayoutAlign="end center" fxFlex="98" style="margin-top: 30px; margin-bottom: 30px;" >
            <div class="icon"  (click)="close()">
                <span class="material-symbols-outlined notranslate cursor"  > close </span>
            </div>
        </div>

        <div fxLayout="row wrap" fxLayoutAlign="center center" fxFlex="100" class="pd-10">
  
            <div  fxLayout="row wrap"  fxLayoutAlign="space-between center" fxFlex="100" style="background-color: rgb(37, 150, 190); height: 30px; padding: 5px; color: white;">
                <span class="font ">N° Pedido: {{order.cbteNro}}</span>
                <span class="font ">Estado: <label [ngStyle]="styleObject(order.estado)"> &nbsp; {{order.estado }}</label></span>
          
            </div> 
  
            <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxFlex="100" class="mt-20" >
  
                      <span fxFlex="45"  class="font " style="text-align: start;"><b>{{order.archivarComo}}</b></span>
                      <span fxFlex="45"  class="font " style="text-align: end; margin-right: 10px;"><b>{{order.fecha | date }}</b></span>
            </div>
            <div fxLayout="row wrap" fxLayoutAlign="end center" fxFlex="100" style="margin-top: 30px;" *ngIf="order.estado === 'A'">
                <div class="icon mr-10"  >
                    <span class="material-symbols-outlined notranslate cursor" style="color: red;"> delete </span>
                </div>
                
                <div class="icon mr-10"  >
                    <span class="material-symbols-outlined notranslate cursor" style="color: rgb(255, 176, 57);" (click)="editOrder(order)"> edit </span>
                </div>

                <div class="icon"  >
                    <span class="material-symbols-outlined notranslate cursor" style="color: rgb(49, 175, 3);" (click)="sendOrder(order)">send</span>
                </div>
            
            </div>
        </div> -->
  
        <!-- <mat-accordion style="width: 97%;" >
          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState" style="background-color: white;"  >
            <mat-expansion-panel-header>
  
              <mat-panel-title fxLayoutAlign="space-between center" class="font">
              
                <span style="color: rgb(164, 164, 164); font-size: 0.9em;">Detalle del pedido...</span>
                              
              </mat-panel-title>
        
            </mat-expansion-panel-header>
  
                    <div  fxLayout="row wrap"  fxLayoutAlign="start center" fxFlex="100">
  
                    <div  fxLayout="row wrap"  fxLayoutAlign="start center" fxFlex="100" *ngFor="let description of order.detalleItems" class="mt-20">
                        <div  fxLayout="row wrap"  fxLayoutAlign="space-between center" fxFlex="100" >
                            <span class="font ">  {{description.cantidad}} &nbsp; x &nbsp;{{description.descripcion | capitalizeFirstLetter}}</span>
                            <span class="font "> <b>Cod.</b> {{description.codigoInterno}} </span>
                        </div>    
                        <span class="font  mt-10"> <b>Sub-Total:</b>  {{description.importeNetoTotal | currency:'$':'symbol':'1.2-2'}}</span>
                    </div>   
                        <span class="font  mt-10" style="text-align: end;" fxFlex="100"> <b>Total:</b>  {{ calculateTotal(order.detalleItems) | currency:'$':'symbol':'1.2-2' }} </span>
                    </div>    
  
                  
  
          </mat-expansion-panel>
        </mat-accordion> -->

    <!-- end order by N° -->

    <ng-container *ngIf="arrOrders.length !== 0">

            <div  fxLayout="row wrap"  fxLayoutAlign="start center" fxFlex="97">
                <span class="font" style="font-size: 1em; text-align: start; margin-top: 20px;" fxFlex="100" >Cantidad de ordenes: {{arrOrders.length}}</span>
                <span class="font" style="font-size: 1em; text-align: start;" fxFlex="100">Importe total: &nbsp; ${{total | decimalRound}}</span>
            </div>
        
          <div class="example-container mat-elevation-z8 font mt-30" fxFlex="99">
        
            <table mat-table [dataSource]="dataTableActive" style="width: 100%;">
        
                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef > Fecha </th>
                    <td mat-cell *matCellDef="let element" > {{element.fecha | date}} </td>
                </ng-container>
        
                <ng-container matColumnDef="client">
                    <th mat-header-cell *matHeaderCellDef> Cliente </th>
                    <td mat-cell *matCellDef="let element"  style="font-size: 0.6em;"> <span style="text-align: start;"> {{element.archivarComo }} </span> </td>
                </ng-container>
                
                <ng-container matColumnDef="total" >
                    <th mat-header-cell *matHeaderCellDef > Total </th>
                    <td mat-cell *matCellDef="let element" style="font-size: 0.6em;" > <span style="text-align: start;">  {{element.extensionTelefono}}{{element.impTotal | decimalRound}} </span> </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </div>

  

    </ng-container>
    
    <!-- start order -->
    <!-- <div  fxLayout="row wrap" fxLayoutAlign="center center" fxFlex="100" *ngIf="arrOrders.length !== 0 ">

        <div fxLayout="row wrap" fxLayoutAlign="end center" fxFlex="97" style="margin-top: 30px; margin-bottom: 10px;" >
            <div class="icon"  (click)="close()">
                <span class="material-symbols-outlined notranslate cursor"> close </span>
            </div>
        </div>

        
        <div fxLayout="row wrap" fxLayoutAlign="center center" fxFlex.xs="99" fxFlex.sm="97" fxFlex="80" *ngFor="let order of arrOrders" class="mt-30 whiteframe"   >

        <div fxLayout="row wrap" fxLayoutAlign="center center" fxFlex="100" class="pd-10">

            <div  fxLayout="row wrap"  fxLayoutAlign="space-between center" fxFlex="100" style="background-color: rgb(37, 150, 190); height: 30px; padding: 5px; color: white;">
                <span class="font ">N° Pedido: {{order.cbteNro}}</span>
                <span class="font ">Estado: <label [ngStyle]="styleObject(order.estado)"> &nbsp; {{order.estado }}</label></span>
            
            </div> 

            <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxFlex="100" class="mt-20" >

                        <span fxFlex="45" fxFlex.xs="45" class="font " style="text-align: end; margin-right: 10px;"><b>{{order.fecha | date }}</b></span>
            </div>
            <div fxLayout="row wrap" fxLayoutAlign="end center" fxFlex="100" style="margin-top: 30px;" *ngIf="order.estado === 'A'">
                <div class="icon mr-10"  >
                    <span class="material-symbols-outlined notranslate cursor" style="color: red;"> delete </span>
                </div>
                
                <div class="icon mr-10"  >
                    <span class="material-symbols-outlined notranslate cursor" style="color: rgb(255, 176, 57);" (click)="editOrder(order)"> edit </span>
                </div>

                <div class="icon"  >
                    <span class="material-symbols-outlined notranslate cursor" style="color: rgb(49, 175, 3);" (click)="sendOrder(order)">send</span>
                </div>
        
            
            </div>
        </div>

         <mat-accordion style="width: 97%;" >
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState" style="background-color: white;"  >
            <mat-expansion-panel-header>

                <mat-panel-title fxLayoutAlign="space-between center" class="font">
                
                <span style="color: rgb(164, 164, 164); font-size: 0.9em;">Detalle del pedido...</span>
                                
                </mat-panel-title>
        
            </mat-expansion-panel-header>

                    <div  fxLayout="row wrap"  fxLayoutAlign="start center" fxFlex="100">

                    <div  fxLayout="row wrap"  fxLayoutAlign="start center" fxFlex="100" *ngFor="let description of order.detalleItems" class="mt-20" style="border-bottom: 1px solid rgb(167, 167, 167); padding: 3px;">
                        <div  fxLayout="row wrap"  fxLayoutAlign="space-between center" fxFlex="100" >
                            <span class="font "> <b>Cod.</b> {{description.codigoInterno}} </span>
                            <span class="font ">  {{description.cantidad}} &nbsp; x &nbsp;{{description.descripcion | capitalizeFirstLetter}}</span>
                        </div>    
                        <span class="font  mt-10"> <b>Sub-Total:</b> $ {{description.impTotal | decimalRound}}</span>
                    </div>   
                        <span class="font  mt-10" style="text-align: end;" fxFlex="100"> <b>Total:</b> $ {{ calculateTotal(order.detalleItems) | decimalRound }} </span>
                    </div>    

                    

            </mat-expansion-panel>
        </mat-accordion> -->
        <!-- </div>   -->
    <!-- end order -->
 </div>    
</div>      


<div *ngIf="isLoading" style="margin-top: 30px;" class="loading-overlay">
  <mat-spinner diameter="80"></mat-spinner>
</div>